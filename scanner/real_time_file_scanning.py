from scan_files import scan_files
from watchdog.events import FileSystemEventHandler
from checks import check_path, check_if_file_is_used_by_another_process

# Monitoring new files as soon as they are created
class File_Handler(FileSystemEventHandler):
    def on_created(self, event):
        file = event.src_path
        if(check_path(file)):
        	while(True):
        		if(check_if_file_is_used_by_another_process(file)): 	# O(N * Q) N is the number of processes iterated 	Q is the number of open files
        			break
        	if(check_path(file)):
        		scan_files(file, one_file=True, real_time=True)			# O(X * M * V) X is the number of / in the path M is the number of processes iterated V is the number of blocks in the hashing funtion