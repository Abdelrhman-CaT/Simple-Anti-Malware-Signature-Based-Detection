from functools import wraps
from flask import request
import os

def authenticate_api_key(func):
	@wraps(func)
	def auth(*args, **kwargs):
		passed_api_key = request.args.get("api_key")
		if(passed_api_key == os.getenv("API_KEY")):
			return func(*args, **kwargs)
		else:
			return {"success": False, "err": "Invalid API key"}, 403
	return auth