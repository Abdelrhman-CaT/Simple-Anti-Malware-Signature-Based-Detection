from SC import db
from SC.models.signatures import Signatures
from SC.controllers.check_signatures import check_signatures
from sqlalchemy import exc

def add_sig_to_db(sig):
	if(check_signatures(sig)):
		try:
			for s in sig:
				exists = Signatures.query.filter_by(SIGN=s).first()
				if not exists:
				    new_signature = Signatures(SIGN=s)
				    db.session.add(new_signature)
			db.session.commit()
			return {"success": True, "status": "signatures added successfully"}, 200
		except exc.SQLAlchemyError as e:
			return {"success": False, "err": str(e)}, 500
	else:
		return {"success": False, "err": "Invalid Signatures"}, 400